

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>WaterVapourMixingRatio &mdash; spookipy 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-rendered-html.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/spookipy_logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Start here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using spookipy in scripts or Jupyter Lab/Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Creating the developpement environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html#getting-the-source-code">Getting the source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html#testing">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html#building-documentation">Building documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssm.html">Creating the ssm package</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="addelementsbypoint.html">AddElementsByPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="addtoelements.html">AddToElements</a></li>
<li class="toctree-l1"><a class="reference internal" href="arithmeticmeanbypoint.html">ArithmeticMeanByPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="dewpointdepression.html">DewPointDepression</a></li>
<li class="toctree-l1"><a class="reference internal" href="georgekindex.html">GeorgeKIndex</a></li>
<li class="toctree-l1"><a class="reference internal" href="humidex.html">Humidex</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolationhorizontalgrid.html">InterpolationHorizontalGrid</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolationhorizontalpoint.html">InterpolationHorizontalPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="mask.html">Mask</a></li>
<li class="toctree-l1"><a class="reference internal" href="minmaxlevelindex.html">MinMaxLevelIndex</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiplyelementsby.html">MultiplyElementsBy</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiplyelementsbypoint.html">MultiplyElementsByPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="pressure.html">Pressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="saturationvapourpressure.html">SaturationVapourPressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="setconstantvalue.html">SetConstantValue</a></li>
<li class="toctree-l1"><a class="reference internal" href="temperaturedewpoint.html">TemperatureDewPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="vapourpressure.html">VapourPressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="windchill.html">WindChill</a></li>
<li class="toctree-l1"><a class="reference internal" href="windmax.html">WindMax</a></li>
<li class="toctree-l1"><a class="reference internal" href="windmodulus.html">WindModulus</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugin.html">Plugin</a></li>
</ul>
<p class="caption"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">spookipy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>WaterVapourMixingRatio</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://gitlab.science.gc.ca/cmdw-spooki/spookipy/blob/master/doc/watervapourmixingratio.rst" class="fa fa-gitlab"> Edit on GitLab</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="watervapourmixingratio">
<h1>WaterVapourMixingRatio<a class="headerlink" href="#watervapourmixingratio" title="Permalink to this headline">¶</a></h1>
<div class="section" id="francais">
<h2>Français<a class="headerlink" href="#francais" title="Permalink to this headline">¶</a></h2>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p>Calcul du rapport de mélange de la vapeur d’eau, rapport entre la
masse de vapeur d’eau et la masse d’air sec.</p></li>
</ul>
<p>*Méthode d’itération:*</p>
<ul class="simple">
<li><p>Point par point</p></li>
</ul>
<p>*Dépendances:*</p>
<ul class="simple">
<li><p>Humidité spécifique, HU
ou</p></li>
<li><p>Température de l’air, TT
<strong>et</strong> un des champs suivants:</p></li>
<li><p>Humidité relative, HR</p></li>
<li><p>Température du point de rosée, TD / Écart du point de rosée, ES</p></li>
</ul>
<p>*Résultat(s):*</p>
<ul class="simple">
<li><p>Rapport de mélange de la vapeur d’eau, QV (g kg-1)</p></li>
</ul>
<p>*Algorithme:*</p>
<div class="highlight-example notranslate"><div class="highlight"><pre><span></span>    -Si la clé --RPN n&#39;est pas activée:

        *Si le champ d&#39;entrée est l&#39;humidité spécifique, HU (kg/kg):
            QV = HU / (1-HU)
            où QV est le rapport de mélange de la vapeur d&#39;eau en kg/kg.

        *Si les champs d&#39;entrée sont l&#39;humidité relative HR (fraction) ou
            la température de point de rosée, TD (deg C)/ écart du point de rosée, ES (deg K ou deg C) et
            la température de l&#39;air, TT (deg C):

            Calculer la pression de vapeur, VPPR (Pa) avec le plugin VapourPressure.
            Calculer la pression, PX (Pa) avec le plugin Pressure.
            QV = epsilon * [VPPR/(PX-VPPR)]
            où QV est le rapport de mélange de la vapeur d&#39;eau en kg/kg et
            epsilon est défini dans la table des constantes comme 0.6219800221014e+00 et correspond à Rd/Rv .


    -Si la clé --RPN est activée:

        *Si le champ d&#39;entrée est l&#39;humidité spécifique, HU (kg/kg):
            QV = HU / (1-HU)
            où QV est le rapport de mélange de la vapeur d&#39;eau en kg/kg.

        *Si les champs d&#39;entrée sont l&#39;humidité relative HR (fraction) ou
            la température de point de rosée, TD (deg C)/ écart du point de rosée, ES (deg K ou deg C) et
            la température de l&#39;air, TT (deg C):

            Calculer l&#39;humidité spécifique, HU (kg/kg) avec le plugin HumiditySpecific (avec les mêmes clés et leurs arguments).
            QV = HU / (1-HU)
            où QV est le rapport de mélange de la vapeur d&#39;eau en kg/kg.


    Convertir QV en g/kg:
       QV(g/kg) = QV(kg/kg)*1000.0


Notes:  Lorsque plusieurs champs des dépendances et le champ TT sont disponibles en entrée, le calcul sera effectué avec le champ qui a le plus de niveaux en commun avec TT dans l&#39;ordre de préférence (en cas d&#39;égalité) avec HU suivi de HR et finalement ES/TD.
        Lorsque le champ TT n&#39;est pas disponible, le calcul sera effectué avec HU.
        Lorsque la clé --RPN est activée et l&#39;attribut de --iceWaterPhase est BOTH, --temperaturePhaseSwitch n&#39;est
        pas accepté et 273.16K (le point triple de l&#39;eau) est attribué aux onctions sesahu.ftn90 et shrahu.ftn90
        qui sont appelées par le plugin HumiditySpecific.
</pre></div>
</div>
<p><strong>Références:</strong></p>
<ul class="simple">
<li><p>Rogers, R. R. and M. K. Yau, 1989: A Short Course in Cloud Physics,
3rd Ed. Butterworth Heinemann, 290 pp.</p></li>
<li><p><a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/RPT/Analyse_du_rapport_de_m%C3%A9lange_de_la_vapeur_d%27eau">Analyse du rapport de mélange de la vapeur
d’eau</a></p></li>
<li><p><a class="reference external" href="https://wiki.cmc.ec.gc.ca/images/6/60/Tdpack2011.pdf%20">Librairie thermodynamique
RPN</a></p></li>
</ul>
<p>*Mots clés:*</p>
<ul class="simple">
<li><p>MÉTÉO/WEATHER, humidité/humidity, rapport/ratio, pression/pressure</p></li>
</ul>
<p>*Usage:*</p>
<p><strong>Exemple d’appel:</strong></p>
<div class="highlight-example notranslate"><div class="highlight"><pre><span></span>...
spooki_run &quot;[ReaderStd --input $SPOOKI_DIR/pluginsRelatedStuff/WaterVapourMixingRatio/testsFiles/inputFile.std] &gt;&gt;
            [WaterVapourMixingRatio] &gt;&gt;
            [WriterStd --output /tmp/$USER/outputFile.std]&quot;
...
</pre></div>
</div>
<p><strong>Validation des résultats:</strong></p>
<p><strong>Contacts:</strong></p>
<ul class="simple">
<li><p>Auteur(e) : Neil Taylor</p></li>
<li><p>Codé par : Jonathan Cameron</p></li>
<li><p>Support : <a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/CMDW">CMDW</a> /
<a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/CMDS">CMDS</a></p></li>
</ul>
<div class="line-block">
<div class="line">Voir la référence à</div>
<div class="line">Tests unitaires</div>
<div class="line"><strong>Ce plugin utilise:</strong></div>
<div class="line"><strong>Ce plugin est utilisé par:</strong></div>
</div>
</div>
<div class="section" id="english">
<h2>English<a class="headerlink" href="#english" title="Permalink to this headline">¶</a></h2>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p>Calculates the water vapour mixing ratio, which is the ratio of the
mass of water vapour to the mass of dry air.</p></li>
</ul>
<p>*Iteration method:*</p>
<ul class="simple">
<li><p>Point-by-point</p></li>
</ul>
<p>*Dependencies:*</p>
<ul class="simple">
<li><p>Specific humidity, HU or</p></li>
<li><p>Air temperature, TT and one of the following fields:</p></li>
<li><p>Relative humidity, HR</p></li>
<li><p>Dewpoint temperature, TD / Dewpoint depression, ES</p></li>
</ul>
<p>NOTE: Make sure to provide the dependencies listed above to this plug-in
or to the plug-in results called by this plug-in (see the section “this
plug-in uses”). For more details on this alternative use, see the
<a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/Spooki/en/Documentation/General_system_description#How_does_it_work.3F">documentation</a>
page.</p>
<p><strong>Result(s):</strong></p>
<ul class="simple">
<li><p>Water vapour mixing ratio, QV (g kg-1)</p></li>
</ul>
<p>*Algorithm:*</p>
<div class="highlight-example notranslate"><div class="highlight"><pre><span></span>    -If the --RPN key is NOT activated:

        *If the input field is specific humidity, HU (kg/kg):
            QV = HU / (1-HU)
            where QV is the water vapour mixing ratio in kg/kg.


        *If the input fields are relative humidity, HR (fraction) or
            dew point temperature, TD (deg C)/ dew point depression, ES (deg K or deg C) and
            the air temperature, TT (deg C):

            Calculate the vapour pressure, VPPR (Pa) with the VapourPressure plug-in.
            Calculate the pressure, PX (Pa) with the Pressure plug-in.
            QV = epsilon * [VPPR/(PX-VPPR)]
            where QV is the water vapour mixing ratio in kg/kg and
            epsilon is defined in the table of constants as 0.6219800221014e+00 and corresponds to Rd/Rv.


    -If the --RPN key is activated:

        *If the input field is specific humidity, HU (kg/kg):
            QV = HU / (1-HU)
            where QV is the water vapour mixing ratio in kg/kg.

        *If the input fields are relative humidity, HR (fraction) or
            dew point temperature, TD (deg C)/ dew point depression, ES (deg K or deg C) and
            the air temperature, TT (deg C):

            Calculate the specific humidity, HU (kg/kg) with the HumiditySpecific plug-in (with the same keys as their arguments)
            QV = HU / (1-HU)
            where QV is the water vapour mixing ratio in kg/kg.


    Convert QV in g/kg:
        QV(g/kg) = QV(kg/kg)*1000.0


Notes: When several fields of the dependencies and TT are available in the input, the calculation will be done with the field that has the most number of levels in common with TT, in order of preference (in case of equality) with HU followed by HR and finally ES/TD.
       When the TT field is not available, the calculation will be done in order of preference with HU.
       When the --RPN key is activate and the attribute to --iceWaterPhase is BOTH, --temperaturePhaseSwitch is no accepted and 273.16K (the triple point of water) is assigned to the sesahu.ftn90 and shrahu.ftn90 functions which are called by the HumiditySpecific plug-in.
</pre></div>
</div>
<p><strong>Reference:</strong></p>
<ul class="simple">
<li><p>Rogers, R. R. and M. K. Yau, 1989: A Short Course in Cloud Physics,
3rd Ed. Butterworth Heinemann, 290 pp.</p></li>
<li><p><a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/RPT/en/Analysis_of_water_vapour_mixing_ratio">Analysis of water vapour mixing
ratio</a></p></li>
<li><p><a class="reference external" href="https://wiki.cmc.ec.gc.ca/images/6/60/Tdpack2011.pdf%20">RPN thermodynamic
library</a></p></li>
</ul>
<p>*Keywords:*</p>
<ul class="simple">
<li><p>WEATHER/METEO, humidity/humidite, ratio/rapport, pressure/pression</p></li>
</ul>
<p>*Usage:*</p>
<p><strong>Call example:</strong></p>
<div class="highlight-example notranslate"><div class="highlight"><pre><span></span>...
spooki_run &quot;[ReaderStd --input $SPOOKI_DIR/pluginsRelatedStuff/WaterVapourMixingRatio/testsFiles/inputFile.std] &gt;&gt;
            [WaterVapourMixingRatio] &gt;&gt;
            [WriterStd --output /tmp/$USER/outputFile.std]&quot;
...
</pre></div>
</div>
<p><strong>Results validation:</strong></p>
<p><strong>Contacts:</strong></p>
<ul class="simple">
<li><p>Author : Neil Taylor</p></li>
<li><p>Coded by : Jonathan Cameron</p></li>
<li><p>Support : <a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/CMDW">CMDW</a> /
<a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/CMDS">CMDS</a></p></li>
</ul>
<div class="line-block">
<div class="line">Reference to</div>
<div class="line">Units tests</div>
<div class="line"><strong>Uses:</strong></div>
<div class="line"><strong>Used by:</strong></div>
</div>
</div>
<div class="section" id="module-spookipy.watervapourmixingratio.watervapourmixingratio">
<span id="python-module"></span><h2>Python Module<a class="headerlink" href="#module-spookipy.watervapourmixingratio.watervapourmixingratio" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="spookipy.watervapourmixingratio.watervapourmixingratio.WaterVapourMixingRatio">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">spookipy.watervapourmixingratio.watervapourmixingratio.</span></span><span class="sig-name descname"><span class="pre">WaterVapourMixingRatio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ice_water_phase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_phase_switch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_phase_switch_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'celsius'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rpn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#spookipy.watervapourmixingratio.watervapourmixingratio.WaterVapourMixingRatio" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="spookipy.watervapourmixingratio.watervapourmixingratio.WaterVapourMixingRatio.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spookipy.watervapourmixingratio.watervapourmixingratio.WaterVapourMixingRatio.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract method that should implement the plugin’s algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dataframe with the results</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spookipy.watervapourmixingratio.watervapourmixingratio.WaterVapourMixingRatio.validate_input">
<span class="sig-name descname"><span class="pre">validate_input</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spookipy.watervapourmixingratio.watervapourmixingratio.WaterVapourMixingRatio.validate_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the plugin’s dataframe is not empty.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="plugin.html#spookipy.plugin.plugin.EmptyDataframeError" title="spookipy.plugin.plugin.EmptyDataframeError"><strong>EmptyDataframeError</strong></a> – The plugin’s dataframe is empty, no data to process.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="spookipy.watervapourmixingratio.watervapourmixingratio.WaterVapourMixingRatioError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">spookipy.watervapourmixingratio.watervapourmixingratio.</span></span><span class="sig-name descname"><span class="pre">WaterVapourMixingRatioError</span></span><a class="headerlink" href="#spookipy.watervapourmixingratio.watervapourmixingratio.WaterVapourMixingRatioError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Sébastien Fortier.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>