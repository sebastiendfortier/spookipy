

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>HumiditySpecific &mdash; spookipy 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-rendered-html.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/spookipy_logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Start here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using spookipy in scripts or Jupyter Lab/Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Creating the developpement environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html#getting-the-source-code">Getting the source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html#testing">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html#building-documentation">Building documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssm.html">Creating the ssm package</a></li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="addelementsbypoint.html">AddElementsByPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="addtoelements.html">AddToElements</a></li>
<li class="toctree-l1"><a class="reference internal" href="arithmeticmeanbypoint.html">ArithmeticMeanByPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="dewpointdepression.html">DewPointDepression</a></li>
<li class="toctree-l1"><a class="reference internal" href="georgekindex.html">GeorgeKIndex</a></li>
<li class="toctree-l1"><a class="reference internal" href="humidex.html">Humidex</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolationhorizontalgrid.html">InterpolationHorizontalGrid</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolationhorizontalpoint.html">InterpolationHorizontalPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="mask.html">Mask</a></li>
<li class="toctree-l1"><a class="reference internal" href="minmaxlevelindex.html">MinMaxLevelIndex</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiplyelementsby.html">MultiplyElementsBy</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiplyelementsbypoint.html">MultiplyElementsByPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="pressure.html">Pressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="saturationvapourpressure.html">SaturationVapourPressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="setconstantvalue.html">SetConstantValue</a></li>
<li class="toctree-l1"><a class="reference internal" href="temperaturedewpoint.html">TemperatureDewPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="vapourpressure.html">VapourPressure</a></li>
<li class="toctree-l1"><a class="reference internal" href="windchill.html">WindChill</a></li>
<li class="toctree-l1"><a class="reference internal" href="windmax.html">WindMax</a></li>
<li class="toctree-l1"><a class="reference internal" href="windmodulus.html">WindModulus</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugin.html">Plugin</a></li>
</ul>
<p class="caption"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">spookipy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>HumiditySpecific</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://gitlab.science.gc.ca/cmdw-spooki/spookipy/blob/master/doc/humidityspecific.rst" class="fa fa-gitlab"> Edit on GitLab</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="humidityspecific">
<h1>HumiditySpecific<a class="headerlink" href="#humidityspecific" title="Permalink to this headline">¶</a></h1>
<div class="section" id="francais">
<h2>Français<a class="headerlink" href="#francais" title="Permalink to this headline">¶</a></h2>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p>Calcul de l’humidité spécifique, rapport entre la masse de vapeur
d’eau dans l’air et la masse d’air humide.</p></li>
</ul>
<p>*Méthode d’itération:*</p>
<ul class="simple">
<li><p>Point par point</p></li>
</ul>
<p>*Dépendances:*</p>
<ul class="simple">
<li><p>Rapport de mélange de la vapeur d’eau, QV
ou</p></li>
<li><p>Température de l’air, TT
<strong>et</strong> un des champs suivants:</p></li>
<li><p>Température du point de rosée, TD / Écart du point de rosée, ES</p></li>
<li><p>Humidité relative, HR</p></li>
</ul>
<p>*Résultat(s):*</p>
<ul class="simple">
<li><p>Humidité spécifique, HU (kg/kg)</p></li>
</ul>
<p>*Algorithme:*</p>
<div class="highlight-example notranslate"><div class="highlight"><pre><span></span>    -Si la clé --RPN n&#39;est pas activée:

        *Si le champ d&#39;entrée est le rapport de mélange de la vapeur d&#39;eau, QV (kg/kg):
            HU = QV / (QV+1)
            où l&#39;humidité spécifique, HU est en kg/kg.

        *Si les champs d&#39;entrée sont l&#39;humidité relative, HR (fraction) ou
            la température du point de rosée, TD (deg C) / l&#39;écart du point de rosée, ES (deg K ou deg C) et
            la température de l&#39;air, TT (deg C):
            Calcul de la pression de vapeur, VPPR (Pa) avec le plugin VapourPressure.
            Calcul la pression, PX (Pa) avec le plugin Pressure.

            HU = epsilon * ( VPPR / (PX - (1-epsilon)*VPPR))

            où l&#39;humidité spécifique, HU est en kg/kg et epsilon est défini dans la table des constantes
            comme 0.6219800221014e+00 et correspond à Rd/Rv.

    -Si la clé --RPN est activée:

        *Si le champ d&#39;entrée est le rapport de mélange de la vapeur d&#39;eau, QV (kg/kg):
            Il n&#39;existe pas de fonction RPN pour ce calcul, nous utilisons donc:
            HU = QV / (QV+1)
            où l&#39;humidité spécifique, HU est en kg/kg.

        *Si les champs d&#39;entrée sont l&#39;humidité relative, HR (fraction) et la température de l&#39;air, TT (deg K):
            Calcul de la pression, PX (Pa) avec le plugin Pressure.
            Appeler la fonction shrahu.ftn90 pour obtenir l&#39;humidité spécifique, HU (kg/kg).

        *Si les champs d&#39;entrée sont la température du point de rosée, TD (deg K) / l&#39;écart du point de rosée, ES (deg K ou deg C) et la température de l&#39;air, TT (deg K):
            Calcul de l&#39;écart du point de rosée, ES (deg K ou deg C) avec le plugin DewPointDepression si nécessaire.
            Calcul de la pression PX (Pa) avec le plugin Pressure.
            Appeler la fonction sesahu.ftn90 pour obtenir l&#39;humidité spécifique, HU (kg/kg).


Notes:  Lorsque plusieurs champs des dépendances et le champ TT sont disponibles en entrée, le calcul sera effectué
        avec le champ qui a le plus de niveaux en commun avec TT dans l&#39;ordre de préférence (en cas d&#39;égalité) avec
        QV suivi de HR, et finalement ES/TD.
        Lorsque le champ TT n&#39;est pas disponible, le calcul sera effectué avec QV.
        Lorsque la clé --RPN est activée et l&#39;attribut de --iceWaterPhase est BOTH, --temperaturePhaseSwitch n&#39;est
        pas accepté et 273.16K (le point triple de l&#39;eau) est attribué aux fonctions sesahu.ftn90 et shrahu.ftn90.
</pre></div>
</div>
<p><strong>Références:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.cmc.ec.gc.ca/images/6/60/Tdpack2011.pdf">Librairie thermodynamique de
RPN</a></p></li>
<li><p><a class="reference external" href="http://fr.wikipedia.org/wiki/Humidit%C3%A9_sp%C3%A9cifique">Wikipedia : Humidité
spécifique</a></p></li>
</ul>
<p>*Mots clés:*</p>
<ul class="simple">
<li><p>MÉTÉO/WEATHER, température/temperature, humidité/humidity</p></li>
</ul>
<p>*Usage:*</p>
<p><strong>Exemple d’appel:</strong></p>
<div class="highlight-example notranslate"><div class="highlight"><pre><span></span>...
spooki_run &quot;[ReaderStd --input $SPOOKI_DIR/pluginsRelatedStuff/HumiditySpecific/testsFiles/inputFile.std] &gt;&gt;
            [HumiditySpecific --iceWaterPhase BOTH --temperaturePhaseSwitch -40C] &gt;&gt;
            [WriterStd --output /tmp/$USER/outputFile.std]&quot;
...
</pre></div>
</div>
<p><strong>Validation des résultats:</strong></p>
<p><strong>Contacts:</strong></p>
<ul class="simple">
<li><p>Auteur(e) : <a class="reference external" href="file:///wiki/Daniel_Figueras">Daniel Figueras</a></p></li>
<li><p>Codé par : <a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/User:Stcyrj">Jonathan
St-Cyr</a>, <a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/User:Hardyg">Guylaine
Hardy</a></p></li>
<li><p>Support : <a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/CMDW">CMDW</a> /
<a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/CMDS">CMDS</a></p></li>
</ul>
<p>Voir la référence à</p>
<p>Units tests</p>
<div class="line-block">
<div class="line"><strong>Ce plugin utilise:</strong></div>
<div class="line"><strong>Ce plugin est utilisé par:</strong></div>
</div>
</div>
<div class="section" id="english">
<h2>English<a class="headerlink" href="#english" title="Permalink to this headline">¶</a></h2>
<p><strong>Description:</strong></p>
<ul class="simple">
<li><p>Calculation of the specific humidity, the ratio of the mass of water
vapour in the air to the total mass of moist air.</p></li>
</ul>
<p>*Iteration method:*</p>
<ul class="simple">
<li><p>Point-by-point</p></li>
</ul>
<p>*Dependencies:*</p>
<ul class="simple">
<li><p>Water vapour mixing ratio, QV
or</p></li>
<li><p>Air temperature, TT
<strong>and</strong> one of the following fields:</p></li>
<li><p>Dew point temperature, TD / Dew point depression, ES</p></li>
<li><p>Humidité relative, HR</p></li>
</ul>
<p>*Result(s):*</p>
<ul class="simple">
<li><p>Specific humidity, HU (kg/kg)</p></li>
</ul>
<p>*Algorithm:*</p>
<div class="highlight-example notranslate"><div class="highlight"><pre><span></span>        -If the --RPN key is NOT activated:

          *If the input field is the water vapour mixing ratio, QV (kg/kg)
               HU = QV / (QV + 1)
             where the specific humidity, HU is in kg/kg


          *If the input fields are the relative humidity, HR (fraction) or the dew point temperature, TD (deg C) / dew point depression, ES (deg K or deg C) and the air temperature, TT (deg C)
             Calculation of the vapour pressure, VPPR (Pa) with the VapourPressure plug-in
             Calculation of the pressure, PX (Pa) with the Pressure plug-in
                HU = epsilon * ( VPPR / (PX - (1-epsilon)*VPPR))
             where specific humidity, HU is in kg/kg and epsilon is defined in the table of constants as 0.6219800221014e+00 and corresponds to Rd/Rv.


        -If the --RPN key is activated:

          *If the input field is the water vapour mixing ratio, QV (kg/kg)
             There is no RPN function for this calculation, therefore we use:
               HU = QV / (QV + 1)
             where the specific humidity, HU is in kg/kg

          *If the input fields are the relative humidity, HR (fraction) and the air temperature, TT (deg K)
             Calculate the pressure, PX (Pa) with the Pressure plug-in
             Call the function shrahu.ftn90 to obtain the specific humidity, HU (kg/kg)

          *If the input fields are the dew point temperature, TD (deg K) / the dew point depression, ES (deg K or deg C) and the air temperature, TT (deg K)
             Calculate the dew point depression, ES (deg K or deg C) with the DewPointDepression plug-in if necessary
             Calculate the pressure, PX (Pa) with the Pressure plug-in
             Call the function sesahu.ftn90 to obtain the specific humidity, HU (kg/kg)


Notes:  - When several fields of the dependencies and TT are available in the input, the calculation will be done with the field that has the most number of levels in common with TT, in order of preference (in case of equality) with QV followed by HR and finally ES/TD.
        - When the TT field is not available, the calculation will be done with QV.
        - When the --RPN key is activate and the attribut to --iceWaterPhase is BOTH, --temperaturePhaseSwitch is no accepted and 273.16K (the triple point of water) is assigned to the sesahu.ftn90 and shrahu.ftn90 functions.
</pre></div>
</div>
<p><strong>Reference:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.cmc.ec.gc.ca/images/6/60/Tdpack2011.pdf">RPN thermodynamic
library</a></p></li>
<li><p><a class="reference external" href="http://en.wikipedia.org/wiki/Specific_humidity">Wikipedia : Specific
humidity</a></p></li>
</ul>
<p>*Keywords:*</p>
<ul class="simple">
<li><p>MÉTÉO/WEATHER, température/temperature, humidité/humidity</p></li>
</ul>
<p>*Usage:*</p>
<p><strong>Call example:</strong></p>
<div class="highlight-example notranslate"><div class="highlight"><pre><span></span>...
spooki_run &quot;[ReaderStd --input $SPOOKI_DIR/pluginsRelatedStuff/HumiditySpecific/testsFiles/inputFile.std] &gt;&gt;
            [HumiditySpecific --iceWaterPhase BOTH --temperaturePhaseSwitch -40C] &gt;&gt;
            [WriterStd --output /tmp/$USER/outputFile.std]&quot;
...
</pre></div>
</div>
<p><strong>Results validation:</strong></p>
<p><strong>Contacts:</strong></p>
<ul class="simple">
<li><p>Author : <a class="reference external" href="file:///wiki/Daniel_Figueras">Daniel Figueras</a></p></li>
<li><p>Coded by : <a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/User:Stcyrj">Jonathan
St-Cyr</a>, <a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/User:Hardyg">Guylaine
Hardy</a></p></li>
<li><p>Support : <a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/CMDW">CMDW</a> /
<a class="reference external" href="https://wiki.cmc.ec.gc.ca/wiki/CMDS">CMDS</a></p></li>
</ul>
<p>Reference to</p>
<p>Units tests</p>
<div class="line-block">
<div class="line"><strong>Uses:</strong></div>
<div class="line"><strong>Used by:</strong></div>
</div>
</div>
<div class="section" id="module-spookipy.humidityspecific.humidityspecific">
<span id="python-module"></span><h2>Python Module<a class="headerlink" href="#module-spookipy.humidityspecific.humidityspecific" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="spookipy.humidityspecific.humidityspecific.HumiditySpecific">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">spookipy.humidityspecific.humidityspecific.</span></span><span class="sig-name descname"><span class="pre">HumiditySpecific</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ice_water_phase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_phase_switch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_phase_switch_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'celsius'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rpn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#spookipy.humidityspecific.humidityspecific.HumiditySpecific" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="spookipy.humidityspecific.humidityspecific.HumiditySpecific.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spookipy.humidityspecific.humidityspecific.HumiditySpecific.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract method that should implement the plugin’s algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>dataframe with the results</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spookipy.humidityspecific.humidityspecific.HumiditySpecific.validate_input">
<span class="sig-name descname"><span class="pre">validate_input</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#spookipy.humidityspecific.humidityspecific.HumiditySpecific.validate_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that the plugin’s dataframe is not empty.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="plugin.html#spookipy.plugin.plugin.EmptyDataframeError" title="spookipy.plugin.plugin.EmptyDataframeError"><strong>EmptyDataframeError</strong></a> – The plugin’s dataframe is empty, no data to process.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="spookipy.humidityspecific.humidityspecific.HumiditySpecificError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">spookipy.humidityspecific.humidityspecific.</span></span><span class="sig-name descname"><span class="pre">HumiditySpecificError</span></span><a class="headerlink" href="#spookipy.humidityspecific.humidityspecific.HumiditySpecificError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Sébastien Fortier.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>